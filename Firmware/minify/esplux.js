function sc(e){var t=getPosition(e.currentTarget),n=e.clientX-t.x,i=Math.round(n/e.currentTarget.offsetWidth*100);1==dimCap&&setLight(i)}function setLight(e){pot.innerHTML=e,percOn.style.width=e+"%",sendWithoutCaring("setLights.lua?val="+Math.round(e/100*1023))}function getPosition(e){for(var t=0,n=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}}function flipCheck(e){return e.currentTarget.firstChild.className.indexOf("selected")>-1?(e.currentTarget.firstChild.className="check",!1):(e.currentTarget.firstChild.className="check selected",!0)}function indLights(e){sendWithoutCaring(1==flipCheck(e)?"setIndicator.lua?state=on":"setIndicator.lua?state=off")}function lightDim(e){1==flipCheck(e)?(sendWithoutCaring("setDim.lua?val=1"),dimCap=!0):(sendWithoutCaring("setDim.lua?val=0"),dimCap=!1)}function lightMem(e){sendWithoutCaring(1==flipCheck(e)?"setACOn.lua?val=1":"setACOn.lua?val=0")}function saveName(e){sendWithoutCaring("setName.lua?val="+document.getElementById("name").value),document.getElementById("LightName").innerHTML=document.getElementById("name").value,e.currentTarget.style.width=e.currentTarget.offsetWidth,e.currentTarget.style.color="#aaa",e.currentTarget.innerHTML="&nbsp; saved &nbsp;",setTimeout(function(){sn.innerHTML="save name",sn.style.color="#fff"},3e3),setTimeout(function(){getState("getState.lua")},1e3)}function sendWithoutCaring(e){var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.open("GET",e,!0),t.send()}function getState(e){var t;t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(cap=t.responseText,parseResp(cap))},t.open("GET",e,!0),t.send()}function parseResp(e){var t=e.split("\n");lm.firstChild.className="1"==t[0]?"check selected":"check",ld.firstChild.className="1"==t[1]?"check selected":"check",document.getElementById("LightName").innerHTML=t[2],document.getElementById("name").value=t[2];var n=Math.round(t[3]/1023*100);for(pot.innerHTML=n,percOn.style.width=n+"%",document.getElementById("ip").value=t[4],document.getElementById("sn").value=t[5],document.getElementById("gw").value=t[6],i=0;i<t.length;i++);}var dimCap=!0,sl=document.getElementById("bar");sl.addEventListener("click",sc,!1);var ind=document.getElementById("ind"),sn=document.getElementById("saveName");ind.addEventListener("click",indLights,!1);var lm=document.getElementById("lightMem");lm.addEventListener("click",lightMem,!1);var ld=document.getElementById("lightDim");ld.addEventListener("click",lightDim,!1),sn.addEventListener("click",saveName,!1);var pot=document.getElementById("pot"),percOn=document.getElementById("percOn");getState("getState.lua");