<html><head><title>ESPLux</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=mobile-web-app-capable content=yes><style>body{background:#f5f5f5;margin:0;font-family:roboto,helvetica}.box,button,header,input:focus,select:focus{box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 3px 1px -2px rgba(0,0,0,.2),0 1px 5px 0 rgba(0,0,0,.12)}.box,header{background:#fff}.box{margin:15px 15px 25px 15px}header{height:50px;position:fixed;width:100%;margin:0;top:0;font-size:35px;padding-left:20px;font-weight:100}#cont{margin-top:80px}.head{background:#388e3c;color:#fff;padding:32px 0 15px 12px}#slideC{text-align:right}#bar{background:#a3e5f0;width:100%;height:48px;position:relative}#percOn{background:#00b9d8;height:100%;display:block}#percTxt{color:#888;margin-top:6px;font-size:21pt;vertical-align:top}#pot{font-size:30pt}.x{padding:20px}button{margin:20px;padding:12px 10px 12px 10px;background:#607d8b;border:0;color:#fff;cursor:pointer;text-transform:uppercase}li{margin:6px 0;vertical-align:top;text-indent:-30px;padding-left:30px}ul{list-style-type:none;margin:0}.check{display:inline-block;border:1px solid #388e3c;width:16px;height:16px;border-radius:23%;margin-top:2px;margin-right:12px}.v{background:#4caf50}.o,.so .check{border:1px solid #e64a19}.o.v,.so .v{background:#ff5722}#support{position:fixed;right:17px;top:13px;color:#888;text-decoration:none;font-size:17px;font-weight:400}.hr,.save{border-top:1px solid rgba(0,0,0,.12)}.hr{margin-top:3px}.save{text-align:right}.save button{margin:12px}.label{display:inline-block;width:106px}.input{display:inline-block;width:210px;position:relative;left:-30px}input,select{width:210px;border:1px solid #388e3c;font-size:12pt;padding:5px}.bl{background:#00b9d8}.fz{font-size:30pt}</style><body><div id=cont><header id=tb>ESPLux <a href=http://esplux.info target=_blank id=support>Support</a></header><div id=lc class=box><div class="head bl">Light Control - <span id=LightName><i>Unknown</i></span></div><div class=x><div id=slideC><div id=bar><span id=percOn></span></div><div id=percTxt><span id=pot class=fz>--</span>%</div></div><div style=text-align:center><button onclick=setLight(0)>Light Off</button> <button onclick=setLight(100)>Light On</button></div></div></div><div id=set class=box><div class=head>Settings</div><div class=x>There isn't much you need to do to your ESPLux, but here are a few options you might like to change from default. The indicator lights will switch back off each time you reset your ESPLux.</div><div class="hr x"><ul><li id=ind><span class=check></span>Indicator lights</li><li id=lightDim><span class="check v"></span>Light is dimmable</li><li id=lightMem><span class=check></span>Set light to previous value when switch is flipped</li></ul></div><div class="hr x"><ul><li><span class=label>Light Name:</span><input id=name class="input"> <button id=saveName style="margin:0 0 1px -26px;padding:7px">Save Name</button></li></ul></div></div><div id=wifi class=box><div class=head style=background:#e64a19>Wi-Fi</div><div class=x id=wifiC><ul><li><span class=label>SSID:</span><input id=ssid class="o input"> <span style=color:#999;font-size:10pt>(Leave this field blank if you want to change your IP without affecting your Wi-Fi settings)</span></li><li><span class=label>Password:</span><input id=pw class="o input" type="password"></li><li id=staticIP class=so><span class="check v"></span>Set Static IP?</li><li class=z><span class=label>IP Address:</span><input id=ip class="o input"></li><li class=z><span class=label>Subnet:</span><input id=sn class="o input"></li><li class=z><span class=label>Gateway:</span><input id=gw class="o input"></li></ul></div><div class=save><button id=saveNet>Save Wireless Settings</button></div></div></div><script type=text/javascript>function sc(e){var t=getPosition(e.currentTarget),s=e.clientX-t.x,n=Math.round(s/e.currentTarget.offsetWidth*100);1==dimCap&&setLight(n)}function setLight(e){pot.innerHTML=e,percOn.style.width=e+"%",swc("setLights.lua?val="+Math.round(e/100*1023))}function getPosition(e){for(var t=0,s=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,s+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:s}}function flipCheck(e){return e.currentTarget.firstChild.className.indexOf("v")>-1?(e.currentTarget.firstChild.className="check",!1):(e.currentTarget.firstChild.className="check v",!0)}function indLights(e){swc(1==flipCheck(e)?"setIndicator.lua?state=on":"setIndicator.lua?state=off")}function lightDim(e){1==flipCheck(e)?(dimCap=!0,pot.parentNode.style.textAlign="right",sl.style.display="block",swc("setDim.lua?val=1")):(dimCap=!1,pot.parentNode.style.textAlign="center",sl.style.display="none",swc("setDim.lua?val=0"))}function lightMem(e){swc(1==flipCheck(e)?"setACOn.lua?val=1":"setACOn.lua?val=0")}function staticIP(e){1==flipCheck(e)?(setSIP("block"),sBool=1):(setSIP("none"),sBool=0)}function saveName(e){swc("setName.lua?val="+$("name").value),$("LightName").innerHTML=$("name").value,e.currentTarget.style.width=e.currentTarget.offsetWidth,e.currentTarget.style.color="#aaa",e.currentTarget.innerHTML="&nbsp; saved &nbsp;",setTimeout(function(){sna.innerHTML="save name",sna.style.color="#fff"},3e3),setTimeout(function(){getState("getState.lua")},1e3)}function saveNetwork(e){""==ssid.value?swc("setIP.lua?static="+sBool+"&ip="+ip.value+"&nm="+sn.value+"&gw="+gw.value):(0==sBool&&(ip.value="192.168.4.1",sn.value="255.255.255.0",gw.value="192.168.4.1"),swc("setWifi.lua?s="+ssid.value+"&p="+pw.value+"&static="+sBool+"&ip="+ip.value+"&nm="+sn.value+"&gw="+gw.value)),$("wifiC").innerHTML="<div style=\"text-align: center;\">You have changed your network settings. Your ESPLux is in the process of being restarted. If your browser hasn't reloaded this page in 10 seconds, you'll need to find it's IP address.",1==sBool?setTimeout(function(){document.location="http://"+ip.value},5e3):setTimeout(function(){document.location="/"},5e3)}function swc(e){var t;window.XMLHttpRequest&&(t=new XMLHttpRequest),t.open("GET",e,!0),t.send()}function getState(e){var t;window.XMLHttpRequest&&(t=new XMLHttpRequest),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&(cap=t.responseText,parseResp(cap))},t.open("GET",e,!0),t.send()}function parseResp(e){var t=e.split("\n");"1"==t[0]?lm.firstChild.className="check v":lm.firstChild.className="check","1"==t[1]?(ld.firstChild.className="check v",dimCap=!0,pot.parentNode.style.textAlign="right",sl.style.display="block"):(ld.firstChild.className="check",dimCap=!1,pot.parentNode.style.textAlign="center",sl.style.display="none"),$("LightName").innerHTML=t[2],$("name").value=t[2];var s=Math.round(t[3]/1023*100);pot.innerHTML=s,percOn.style.width=s+"%","1"==t[4]?(statip.firstChild.className="check v",sBool=1):(statip.firstChild.className="check",setSIP("none")),ip.value=t[5],sn.value=t[6],gw.value=t[7]}function setSIP(e){ip.parentNode.style.display=e,sn.parentNode.style.display=e,gw.parentNode.style.display=e}var $=function(e){return document.getElementById(e)},dimCap=!0,sl=$("bar"),ind=$("ind"),sna=$("saveName"),lm=$("lightMem"),ld=$("lightDim"),statip=$("staticIP"),saveNet=$("saveNet"),ip=$("ip"),sn=$("sn"),gw=$("gw"),ssid=$("ssid"),pw=$("pw"),z=document.getElementsByClassName("z"),pot=$("pot"),percOn=$("percOn"),sBool=0;sl.addEventListener("click",sc,!1),ind.addEventListener("click",indLights,!1),sna.addEventListener("click",saveName,!1),lm.addEventListener("click",lightMem,!1),ld.addEventListener("click",lightDim,!1),statip.addEventListener("click",staticIP,!1),saveNet.addEventListener("click",saveNetwork,!1),getState("getState.lua");</script>